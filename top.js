var value;
value = [
    {"Name":"ADAPAgent",
    "PercentProcessorTime":"0"},
    {"Name":"ADAPAgentService",
    "PercentProcessorTime":"0"},
    {"Name":"AWSAgent",
    "PercentProcessorTime":"0"},
    {"Name":"AuthLiteService",
    "PercentProcessorTime":"0"},
    {"Name":"Idle",
    "PercentProcessorTime":"254"},
    {"Name":"LogonUI",
    "PercentProcessorTime":"0"},
    {"Name":"LogonUI#1",
    "PercentProcessorTime":"0"},
    {"Name":"McsAgent",
    "PercentProcessorTime":"0"},
    {"Name":"McsClient",
    "PercentProcessorTime":"0"},
    {"Name":"Microsoft.ActiveDirectory.WebServices",
    "PercentProcessorTime":"0"},
    {"Name":"Registry",
    "PercentProcessorTime":"0"},
    {"Name":"RuntimeBroker",
    "PercentProcessorTime":"0"},
    {"Name":"RuntimeBroker#1",
    "PercentProcessorTime":"0"},
    {"Name":"RuntimeBroker#2",
    "PercentProcessorTime":"0"},
    {"Name":"SEDService",
    "PercentProcessorTime":"0"},
    {"Name":"SSPService",
    "PercentProcessorTime":"11"},
    {"Name":"SearchIndexer",
    "PercentProcessorTime":"0"},
    {"Name":"SearchUI",
    "PercentProcessorTime":"0"},
    {"Name":"ShellExperienceHost",
    "PercentProcessorTime":"0"},
    {"Name":"Sophos UI",
    "PercentProcessorTime":"0"},
    {"Name":"SophosFIMService",
    "PercentProcessorTime":"0"},
    {"Name":"SophosFS",
    "PercentProcessorTime":"0"},
    {"Name":"SophosFileScanner",
    "PercentProcessorTime":"0"},
    {"Name":"SophosFileScanner#1",
    "PercentProcessorTime":"0"},
    {"Name":"SophosHealth",
    "PercentProcessorTime":"0"},
    {"Name":"SophosLiveQueryService",
    "PercentProcessorTime":"0"},
    {"Name":"SophosNetFilter",
    "PercentProcessorTime":"0"},
    {"Name":"SophosNtpService",
    "PercentProcessorTime":"0"},
    {"Name":"SophosOsquery",
    "PercentProcessorTime":"0"},
    {"Name":"SysIntegMgr",
    "PercentProcessorTime":"0"},
    {"Name":"System",
    "PercentProcessorTime":"5"},
    {"Name":"UpdaterService",
    "PercentProcessorTime":"0"},
    {"Name":"WmiPrvSE",
    "PercentProcessorTime":"0"},
    {"Name":"WmiPrvSE#1",
    "PercentProcessorTime":"0"},
    {"Name":"WmiPrvSE#2",
    "PercentProcessorTime":"0"},
    {"Name":"_Total",
    "PercentProcessorTime":"393"},
    {"Name":"amazon-ssm-agent",
    "PercentProcessorTime":"0"},
    {"Name":"conhost",
    "PercentProcessorTime":"0"},
    {"Name":"conhost#1",
    "PercentProcessorTime":"0"},
    {"Name":"csrss",
    "PercentProcessorTime":"0"},
    {"Name":"csrss#1",
    "PercentProcessorTime":"0"},
    {"Name":"csrss#2",
    "PercentProcessorTime":"0"},
    {"Name":"ctfmon",
    "PercentProcessorTime":"0"},
    {"Name":"dfsrs",
    "PercentProcessorTime":"0"},
    {"Name":"dfssvc",
    "PercentProcessorTime":"0"},
    {"Name":"dllhost",
    "PercentProcessorTime":"0"},
    {"Name":"dns",
    "PercentProcessorTime":"5"},
    {"Name":"dwm",
    "PercentProcessorTime":"0"},
    {"Name":"dwm#1",
    "PercentProcessorTime":"0"},
    {"Name":"explorer",
    "PercentProcessorTime":"0"},
    {"Name":"fontdrvhost",
    "PercentProcessorTime":"0"},
    {"Name":"fontdrvhost#1",
    "PercentProcessorTime":"0"},
    {"Name":"fontdrvhost#2",
    "PercentProcessorTime":"0"},
    {"Name":"hmpalert",
    "PercentProcessorTime":"0"},
    {"Name":"ismserv",
    "PercentProcessorTime":"0"},
    {"Name":"lsass",
    "PercentProcessorTime":"5"},
    {"Name":"mmc",
    "PercentProcessorTime":"0"},
    {"Name":"msdtc",
    "PercentProcessorTime":"0"},
    {"Name":"nxlog",
    "PercentProcessorTime":"98"},
    {"Name":"rdpclip",
    "PercentProcessorTime":"0"},
    {"Name":"services",
    "PercentProcessorTime":"0"},
    {"Name":"sihost",
    "PercentProcessorTime":"0"},
    {"Name":"smss",
    "PercentProcessorTime":"0"},
    {"Name":"ssm-agent-worker",
    "PercentProcessorTime":"0"},
    {"Name":"svchost",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#1",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#2",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#3",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#4",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#5",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#6",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#7",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#8",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#9",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#10",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#11",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#12",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#13",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#14",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#15",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#16",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#17",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#18",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#19",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#20",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#21",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#22",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#23",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#24",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#25",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#26",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#27",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#28",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#29",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#30",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#31",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#32",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#33",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#34",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#35",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#36",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#37",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#38",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#39",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#40",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#41",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#42",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#43",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#44",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#45",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#46",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#47",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#48",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#49",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#50",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#51",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#52",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#53",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#54",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#55",
    "PercentProcessorTime":"0"},
    {"Name":"svchost#56",
    "PercentProcessorTime":"0"},
    {"Name":"taskhostw",
    "PercentProcessorTime":"0"},
    {"Name":"vds",
    "PercentProcessorTime":"0"},
    {"Name":"wininit",
    "PercentProcessorTime":"0"},
    {"Name":"winlogon",
    "PercentProcessorTime":"0"},
    {"Name":"winlogon#1",
    "PercentProcessorTime":"0"},
    {"Name":"zabbix_agent2",
    "PercentProcessorTime":"11"}
]

function dSort(property) {
    sortOrder = 1;
    if(property[0] === "-") {
      sortOrder = -1;
      property = property.substr(1);
    }
    return function (a,b) {
      result = (a[property] < b[property]) ? -1: (a[property] > b[property]) ? 1 : 0;
      return result * sortOrder;
    }
  }
  
  array = JSON.parse(value)
  array.sort(dSort(-PercentProcessorTime));
  top = array.slice(0, 9)
  table = "<table>"
  pNames = Object.keys(array[0]);
  for (x in pNames) {
    th = "<th>" + pNames[x] + "</th>";
    table += th;
  }
  for (x in top) {
    td = "<td>" + top[x] + "</td>";
    table += td;
  }
  
  table += "</table>";
  return (table);
